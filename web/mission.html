<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

	<title>Dynamix Mission - Manage Mission - TESTNET Binance</title>
  </head>
  <body>
	<div class="container-fluid">
		<h1>Dynamix Mission: Manage Mission (TESTNET Binance)</h1>
		<button type="button" id="connectWallet" class="btn btn-primary">Connect Wallet</button>

		<div class="spinner-border" role="status" id="globalSpinner">
			<span class="sr-only">Loading...</span>
		</div>
		
		<div class="row">
			<div class="col-6">
				<div id="successMsg" class="alert alert-success" role="alert">
				  
				</div>
				<div id="errorMsg" class="alert alert-danger" role="alert">
				 
				</div>
			</div>
		</div>
		
		<div class="row mt-2">
			<div class="col-6">
				<h3>Buyer</h3>
				<form>
				  <div class="form-row">
					<div class="form-group col-md-4">
						<label for="buyerWallet">Wallet</label>
						<input readonly id="buyerWallet" type="text" class="form-control" placeholder="" value="">
					</div>
					<div class="form-group col-md-4">
						<label for="buyerName">FullName</label>
						<input readonly id="buyerName" type="text" class="form-control" placeholder="" value="">
					</div>
					<div class="form-group col-md-4">
						<label for="buyerTG">Telegram</label>
						<input readonly id="buyerTG" type="text" class="form-control" placeholder="" value="">
					</div>
				  </div>
				</form>			
			</div>
		</div>
		<div class="row">
			<div class="col-6">
				<h3>Seller</h3>
				<form>
				  <div class="form-row">
					<div class="form-group col-md-4">
						<label for="sellerWallet">Wallet</label>
						<input readonly id="sellerWallet" type="text" class="form-control" placeholder="" value="">
					</div>
					<div class="form-group col-md-4">
						<label for="sellerName">FullName</label>
						<input readonly id="sellerName" type="text" class="form-control" placeholder="" value="">
					</div>
					<div class="form-group col-md-4">
						<label for="sellerTG">Telegram</label>
						<input readonly id="sellerTG" type="text" class="form-control" placeholder="" value="">
					</div>
				  </div>
				</form>	
			</div>
		</div>
		<hr />
		
		<div class="row">
			<div class="col-6">
				<h2>Mission</h2>
				<form>
				  <div class="form-row">
					<div class="form-group col-md-3">
						<label for="amount">Buyer Has Canceled Mission</label>
						<input readonly id="BuyerHasCanceledMission" type="text" class="form-control" placeholder="" value="">
					</div>
					<div class="form-group col-md-3">
						<label for="amount">Buyer Has Funded Mission</label>
						<input readonly id="BuyerHasFundedMission" type="text" class="form-control" placeholder="" value="">
					</div>
					<div class="form-group col-md-3">
						<label for="amount">Buyer Has Paid Mission</label>
						<input readonly id="BuyerHasPaidMission" type="text" class="form-control" placeholder="" value="">
					</div>
					<div class="form-group col-md-3">
						<label for="amount">Seller Has Accepted Mission</label>
						<input readonly id="SellerHasAcceptedMission" type="text" class="form-control" placeholder="" value="">
					</div>
					<div class="form-group col-md-3">
						<label for="amount">BNB Amount</label>
						<input readonly id="amount" type="text" class="form-control" placeholder="" value="">
					</div>
					<div class="form-group col-md-12">
						<label for="description">Description</label>
						<textarea readonly id="description" type="text" class="form-control" placeholder=""></textarea>
					</div>
				  </div>
				</form>			
			</div>
		</div>
		
		<a  id="bsclink" class="btn btn-info" target="_blank" tabindex="-1" role="button" aria-disabled="true">BSC View</a>

		<button type="button" id="financeMission" class="btn btn-primary">
			<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
			Finance Mission
		</button>
	</div>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
	<script src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js" type="application/javascript"></script>	
	
	<script type="text/javascript">
		const missionABI = [{"inputs":[{"internalType":"address","name":"buyerWallet","type":"address"},{"internalType":"string","name":"buyerName","type":"string"},{"internalType":"string","name":"buyerTG","type":"string"},{"internalType":"address","name":"sellerWallet","type":"address"},{"internalType":"string","name":"sellerName","type":"string"},{"internalType":"string","name":"sellerTG","type":"string"},{"internalType":"string","name":"missionDescription","type":"string"},{"internalType":"uint256","name":"missionAmount","type":"uint256"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[],"name":"MissionAccepted","type":"event"},{"anonymous":false,"inputs":[],"name":"MissionCanceled","type":"event"},{"anonymous":false,"inputs":[],"name":"MissionFunded","type":"event"},{"anonymous":false,"inputs":[],"name":"MissionGivenUp","type":"event"},{"anonymous":false,"inputs":[],"name":"MissionPaid","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"amountRefundedToBuyer","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amountRefundedToSeller","type":"uint256"}],"name":"ModeratorIntervention","type":"event"},{"inputs":[],"name":"Amount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"Buyer","outputs":[{"internalType":"address","name":"wallet","type":"address"},{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"tg","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"BuyerHasCanceledMission","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"BuyerHasFundedMission","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"BuyerHasPaidMission","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"CreationDate","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"Description","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"Moderator","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"Seller","outputs":[{"internalType":"address","name":"wallet","type":"address"},{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"tg","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"SellerHasAcceptedMission","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"feesAddress","outputs":[{"internalType":"address payable","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"stateMutability":"payable","type":"receive"},{"inputs":[],"name":"financeMission","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"payMission","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"cancelMission","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"acceptMission","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"giveUpMission","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"isFunded","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"percentageToBeRefundedToBuyer","type":"uint256"}],"name":"mediation","outputs":[],"stateMutability":"nonpayable","type":"function"}];		
		const missionbyteCode = "0x60806040527334a1a24bb6c8a692e6f5f7650c89bd88cb51a28d600960046101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555073627306090abab3a6e1400e9345bc60c78a8bef57600a60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550601e600b556005600c55348015620000c557600080fd5b5060405162002380380380620023808339818101604052610100811015620000ec57600080fd5b8101908080519060200190929190805160405193929190846401000000008211156200011757600080fd5b838201915060208201858111156200012e57600080fd5b82518660018202830111640100000000821117156200014c57600080fd5b8083526020830192505050908051906020019080838360005b838110156200018257808201518184015260208101905062000165565b50505050905090810190601f168015620001b05780820380516001836020036101000a031916815260200191505b5060405260200180516040519392919084640100000000821115620001d457600080fd5b83820191506020820185811115620001eb57600080fd5b82518660018202830111640100000000821117156200020957600080fd5b8083526020830192505050908051906020019080838360005b838110156200023f57808201518184015260208101905062000222565b50505050905090810190601f1680156200026d5780820380516001836020036101000a031916815260200191505b5060405260200180519060200190929190805160405193929190846401000000008211156200029b57600080fd5b83820191506020820185811115620002b257600080fd5b8251866001820283011164010000000082111715620002d057600080fd5b8083526020830192505050908051906020019080838360005b8381101562000306578082015181840152602081019050620002e9565b50505050905090810190601f168015620003345780820380516001836020036101000a031916815260200191505b50604052602001805160405193929190846401000000008211156200035857600080fd5b838201915060208201858111156200036f57600080fd5b82518660018202830111640100000000821117156200038d57600080fd5b8083526020830192505050908051906020019080838360005b83811015620003c3578082015181840152602081019050620003a6565b50505050905090810190601f168015620003f15780820380516001836020036101000a031916815260200191505b50604052602001805160405193929190846401000000008211156200041557600080fd5b838201915060208201858111156200042c57600080fd5b82518660018202830111640100000000821117156200044a57600080fd5b8083526020830192505050908051906020019080838360005b838110156200048057808201518184015260208101905062000463565b50505050905090810190601f168015620004ae5780820380516001836020036101000a031916815260200191505b50604052602001805190602001909291905050508473ffffffffffffffffffffffffffffffffffffffff168873ffffffffffffffffffffffffffffffffffffffff16141562000565576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601f8152602001807f427579657220616e642053656c6c65722063616e277420626520657175616c0081525060200191505060405180910390fd5b60405180606001604052808973ffffffffffffffffffffffffffffffffffffffff168152602001888152602001878152506000808201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506020820151816001019080519060200190620005fc9291906200070f565b5060408201518160020190805190602001906200061b9291906200070f565b5090505060405180606001604052808673ffffffffffffffffffffffffffffffffffffffff16815260200185815260200184815250600360008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506020820151816001019080519060200190620006b79291906200070f565b506040820151816002019080519060200190620006d69291906200070f565b509050508160069080519060200190620006f29291906200070f565b5080600881905550426007819055505050505050505050620007b5565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106200075257805160ff191683800117855562000783565b8280016001018555821562000783579182015b828111156200078257825182559160200191906001019062000765565b5b50905062000792919062000796565b5090565b5b80821115620007b157600081600090555060010162000797565b5090565b611bbb80620007c56000396000f3fe60806040526004361061010d5760003560e01c806391dd75e711610095578063ab5cab8111610064578063ab5cab811461056c578063b24c7c9f14610599578063b7de6f87146105c6578063ef7fe39c146105f1578063fd2a98ab1461061e57610114565b806391dd75e7146103ce578063a182eb831461040f578063a1c12e6b1461043c578063a909525a1461055557610114565b8063644fab0d116100dc578063644fab0d1461027e5780636bf8a5f6146102b95780636ffbb0d7146102fa5780637c654303146103115780638191745f1461033e57610114565b806307fd3687146101195780632bee0b0414610232578063586e42721461023c5780635a66bc6a1461025357610114565b3661011457005b600080fd5b34801561012557600080fd5b5061012e610635565b604051808473ffffffffffffffffffffffffffffffffffffffff1681526020018060200180602001838103835285818151815260200191508051906020019080838360005b8381101561018e578082015181840152602081019050610173565b50505050905090810190601f1680156101bb5780820380516001836020036101000a031916815260200191505b50838103825284818151815260200191508051906020019080838360005b838110156101f45780820151818401526020810190506101d9565b50505050905090810190601f1680156102215780820380516001836020036101000a031916815260200191505b509550505050505060405180910390f35b61023a61079d565b005b34801561024857600080fd5b506102516109a8565b005b34801561025f57600080fd5b50610268610b9f565b6040518082815260200191505060405180910390f35b34801561028a57600080fd5b506102b7600480360360208110156102a157600080fd5b8101908080359060200190929190505050610ba5565b005b3480156102c557600080fd5b506102ce610e90565b604051808273ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561030657600080fd5b5061030f610eb6565b005b34801561031d57600080fd5b5061032661102b565b60405180821515815260200191505060405180910390f35b34801561034a57600080fd5b50610353611074565b6040518080602001828103825283818151815260200191508051906020019080838360005b83811015610393578082015181840152602081019050610378565b50505050905090810190601f1680156103c05780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b3480156103da57600080fd5b506103e3611112565b604051808273ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561041b57600080fd5b50610424611138565b60405180821515815260200191505060405180910390f35b34801561044857600080fd5b5061045161114b565b604051808473ffffffffffffffffffffffffffffffffffffffff1681526020018060200180602001838103835285818151815260200191508051906020019080838360005b838110156104b1578082015181840152602081019050610496565b50505050905090810190601f1680156104de5780820380516001836020036101000a031916815260200191505b50838103825284818151815260200191508051906020019080838360005b838110156105175780820151818401526020810190506104fc565b50505050905090810190601f1680156105445780820380516001836020036101000a031916815260200191505b509550505050505060405180910390f35b34801561056157600080fd5b5061056a6112b3565b005b34801561057857600080fd5b506105816115d7565b60405180821515815260200191505060405180910390f35b3480156105a557600080fd5b506105ae6115ea565b60405180821515815260200191505060405180910390f35b3480156105d257600080fd5b506105db6115fd565b6040518082815260200191505060405180910390f35b3480156105fd57600080fd5b50610606611603565b60405180821515815260200191505060405180910390f35b34801561062a57600080fd5b50610633611616565b005b60038060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690806001018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156106f55780601f106106ca576101008083540402835291602001916106f5565b820191906000526020600020905b8154815290600101906020018083116106d857829003601f168201915b505050505090806002018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156107935780601f1061076857610100808354040283529160200191610793565b820191906000526020600020905b81548152906001019060200180831161077657829003601f168201915b5050505050905083565b3373ffffffffffffffffffffffffffffffffffffffff166000800160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614610862576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260178152602001807f43616c6c6572206973206e6f742074686520627579657200000000000000000081525060200191505060405180910390fd5b600960009054906101000a900460ff16156108e5576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260138152602001807f4d697373696f6e2069732063616e63656c65640000000000000000000000000081525060200191505060405180910390fd5b6108ed61102b565b61095f576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260188152602001807f4e6f7420656e6f75676820424e422070726f76696465642e000000000000000081525060200191505060405180910390fd5b6001600960016101000a81548160ff0219169083151502179055507fd165f9d8128fa24343c185f17d3f2d430ee426c74f658245710f643637e08c9460405160405180910390a1565b3373ffffffffffffffffffffffffffffffffffffffff16600360000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614610a6e576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260188152602001807f43616c6c6572206973206e6f74207468652073656c6c6572000000000000000081525060200191505060405180910390fd5b600960029054906101000a900460ff1615610af1576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260178152602001807f4d697373696f6e20697320616c7265616479207061696400000000000000000081525060200191505060405180910390fd5b600960039054906101000a900460ff16610b56576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526025815260200180611b406025913960400191505060405180910390fd5b6000600960036101000a81548160ff0219169083151502179055507f13d5f9edf1c4869722e0644fa1254d3db7bbb8b157ce0b3732ba61ca3886cfb760405160405180910390a1565b60085481565b3373ffffffffffffffffffffffffffffffffffffffff16600a60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614610c68576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601b8152602001807f43616c6c6572206973206e6f7420746865204d6f64657261746f72000000000081525060200191505060405180910390fd5b6000610c956103e8610c87600b546008546118c290919063ffffffff16565b61194890919063ffffffff16565b905060008114610d0957600960049054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc829081150290604051600060405180830381858888f19350505050158015610d07573d6000803e3d6000fd5b505b60004790506000610d366064610d2886856118c290919063ffffffff16565b61194890919063ffffffff16565b905060008114610db25760008060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690508073ffffffffffffffffffffffffffffffffffffffff166108fc839081150290604051600060405180830381858888f19350505050158015610daf573d6000803e3d6000fd5b50505b47915060008214610e30576000600360000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690508073ffffffffffffffffffffffffffffffffffffffff166108fc849081150290604051600060405180830381858888f19350505050158015610e2d573d6000803e3d6000fd5b50505b6001600960026101000a81548160ff0219169083151502179055507f2df677bede8c65babf6a60de66b0bf57f0b953d83d474943419478f32852129f8183604051808381526020018281526020019250505060405180910390a150505050565b600a60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b3373ffffffffffffffffffffffffffffffffffffffff16600360000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614610f7c576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260188152602001807f43616c6c6572206973206e6f74207468652073656c6c6572000000000000000081525060200191505060405180910390fd5b600960039054906101000a900460ff1615610fe2576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526027815260200180611ae16027913960400191505060405180910390fd5b6001600960036101000a81548160ff0219169083151502179055507ff64fdb2f48e24e9a8874c2926b707fbce2fc9521c33b90cc05376f9990860d9e60405160405180910390a1565b60004761106d60085461105f6103e8611051600b546008546118c290919063ffffffff16565b61194890919063ffffffff16565b61199290919063ffffffff16565b1115905090565b60068054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561110a5780601f106110df5761010080835404028352916020019161110a565b820191906000526020600020905b8154815290600101906020018083116110ed57829003601f168201915b505050505081565b600960049054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600960019054906101000a900460ff1681565b60008060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690806001018054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561120b5780601f106111e05761010080835404028352916020019161120b565b820191906000526020600020905b8154815290600101906020018083116111ee57829003601f168201915b505050505090806002018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156112a95780601f1061127e576101008083540402835291602001916112a9565b820191906000526020600020905b81548152906001019060200180831161128c57829003601f168201915b5050505050905083565b3373ffffffffffffffffffffffffffffffffffffffff166000800160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614611378576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260178152602001807f43616c6c6572206973206e6f742074686520627579657200000000000000000081525060200191505060405180910390fd5b600960019054906101000a900460ff166113fa576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260158152602001807f4d697373696f6e206973206e6f742066756e646564000000000000000000000081525060200191505060405180910390fd5b600960009054906101000a900460ff161561147d576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260138152602001807f4d697373696f6e2069732063616e63656c65640000000000000000000000000081525060200191505060405180910390fd5b60006114aa6103e861149c600b546008546118c290919063ffffffff16565b61194890919063ffffffff16565b9050600960049054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc829081150290604051600060405180830381858888f19350505050158015611514573d6000803e3d6000fd5b5060004790506000600360000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690508073ffffffffffffffffffffffffffffffffffffffff166108fc839081150290604051600060405180830381858888f1935050505015801561158a573d6000803e3d6000fd5b506001600960026101000a81548160ff0219169083151502179055507fd165f9d8128fa24343c185f17d3f2d430ee426c74f658245710f643637e08c9460405160405180910390a1505050565b600960029054906101000a900460ff1681565b600960009054906101000a900460ff1681565b60075481565b600960039054906101000a900460ff1681565b3373ffffffffffffffffffffffffffffffffffffffff166000800160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16146116db576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260178152602001807f43616c6c6572206973206e6f742074686520627579657200000000000000000081525060200191505060405180910390fd5b600960039054906101000a900460ff1615611741576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526038815260200180611b086038913960400191505060405180910390fd5b61174961102b565b1561185f57600061177b6103e861176d600c546008546118c290919063ffffffff16565b61194890919063ffffffff16565b9050600960049054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc829081150290604051600060405180830381858888f193505050501580156117e5573d6000803e3d6000fd5b50600047905060008060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690508073ffffffffffffffffffffffffffffffffffffffff166108fc839081150290604051600060405180830381858888f1935050505015801561185a573d6000803e3d6000fd5b505050505b6001600960006101000a81548160ff0219169083151502179055506000600960016101000a81548160ff0219169083151502179055507e416334e9672164fec63bf0118588d3a00ba3a8a9fb757c76a884a05ed990ca60405160405180910390a1565b6000808314156118d55760009050611942565b60008284029050828482816118e657fe5b041461193d576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526021815260200180611b656021913960400191505060405180910390fd5b809150505b92915050565b600061198a83836040518060400160405280601a81526020017f536166654d6174683a206469766973696f6e206279207a65726f000000000000815250611a1a565b905092915050565b600080828401905083811015611a10576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601b8152602001807f536166654d6174683a206164646974696f6e206f766572666c6f77000000000081525060200191505060405180910390fd5b8091505092915050565b60008083118290611ac6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825283818151815260200191508051906020019080838360005b83811015611a8b578082015181840152602081019050611a70565b50505050905090810190601f168015611ab85780820380516001836020036101000a031916815260200191505b509250505060405180910390fd5b506000838581611ad257fe5b04905080915050939250505056fe5468652073656c6c657220616c726561647920616363657074656420746865206d697373696f6e5468652073656c6c65722068617320616363657074656420746865206d697373696f6e2c20796f752063616e27742063616e63656c2069745468652073656c6c657220616c72656164792067697665757020746865206d697373696f6e536166654d6174683a206d756c7469706c69636174696f6e206f766572666c6f77a26469706673582212207aedc628008c891bc76ada298d61d5fe0c2d56d1dd33d2a06394cb90a9e336c164736f6c634300060c0033";
		
		$(document).ready(async () => {
			$('#financeMission .spinner-border').hide();
			$('#successMsg').hide();
			$('#errorMsg').hide();

			const urlParams = new URLSearchParams(window.location.search);
			const addrMission = urlParams.get("addr");
			$('#bsclink').attr('href', 'https://testnet.bscscan.com/address/' + addrMission);
		
			const ethersProvider = new ethers.providers.Web3Provider(window.ethereum, 'any');
			const contract = new ethers.Contract(addrMission, missionABI, ethersProvider.getSigner());
			const contractMission = contract.connect(ethersProvider.getSigner());

			var wallet;

			var buyer = (await contractMission.Buyer());
			var seller = (await contractMission.Seller());
			var info = (await contractMission.info());
			
			var description = info[0];
			var amount = info[1];
			var buyerHasCanceledMission = info[2];
			var buyerHasFundedMission = info[3];
			var buyerHasPaidMission = info[4];
			var sellerHasAcceptedMission = info[5];

			$('#buyerWallet').val(buyer.wallet);
			$('#buyerName').val(buyer.name);
			$('#buyerTG').val(buyer.tg);
			$('#sellerWallet').val(seller.wallet);
			$('#sellerName').val(seller.name);
			$('#sellerTG').val(seller.tg);
			$('#description').val(description);
			$('#amount').val(ethers.utils.formatEther(amount));

			$('#BuyerHasCanceledMission').val(buyerHasCanceledMission ? 'Yes' : 'No');
			$('#BuyerHasFundedMission').val(buyerHasFundedMission ? 'Yes' : 'No');
			$('#BuyerHasPaidMission').val(buyerHasPaidMission ? 'Yes' : 'No');
			$('#SellerHasAcceptedMission').val(sellerHasAcceptedMission ? 'Yes' : 'No');
			
			$('#globalSpinner').hide();
			
			$('#connectWallet').click(function(){
				if (typeof window.ethereum !== 'undefined') {
				  const wallets = ethereum.request({ method: 'eth_requestAccounts' });
				  wallets.then(function(wallet){
					$('#connectWallet').text(wallet[0]);
					wallet = wallet[0];
				  });
				}
			});
			
			if (typeof window.ethereum !== 'undefined') {
				ethereum.on('accountsChanged', (wallet) => {
					$('#connectWallet').text(wallet[0]);
					wallet = wallet[0];
				});
			}
						
			$('#financeMission').click(async () => {		
				$('#financeMission .spinner-border').show();
				$('#errorMsg').hide();
				$('#successMsg').hide();
				
				try {
					await contractMission.financeMission({
					  from: wallet,
					  value: amount,
					  gasLimit: 60000,
					  gasPrice: '20000000000',
					});
					
					$('#successMsg').show();
					$('#successMsg').html("Mission Funded");
				}
				catch(err) {
					console.log(err);
					
					$('#errorMsg').show();
					$('#errorMsg').html(err);
				}
				$('#financeMission .spinner-border').hide();
			});			
		});
	</script>
  </body>
</html>

