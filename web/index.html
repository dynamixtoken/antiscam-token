<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

	<title>Dynamix Mission - Create Mission - TESTNET Binance</title>
  </head>
  <body>
	<div class="container-fluid">
		<h1>Dynamix Mission: Create Mission (TESTNET Binance)</h1>
		<button type="button" id="connectWallet" class="btn btn-primary">Connect Wallet</button>
				
		<div class="row mt-5">
			<div class="col-6">
				<h3>Buyer</h3>
				<form>
				  <div class="form-row">
					<div class="form-group col-md-4">
						<label for="buyerWallet">Wallet</label>
						<input id="buyerWallet" type="text" class="form-control" placeholder="Wallet" value="0xCcBd72543281a396dAe65EC6fFC79C8a5e7bFa36">
					</div>
					<div class="form-group col-md-4">
						<label for="buyerName">FullName</label>
						<input id="buyerName" type="text" class="form-control" placeholder="FullName" value="John Wick">
					</div>
					<div class="form-group col-md-4">
						<label for="buyerTG">Telegram</label>
						<input id="buyerTG" type="text" class="form-control" placeholder="Telegram" value="@johnWick">
					</div>
				  </div>
				</form>			
			</div>
		</div>
		<hr />
		<div class="row">
			<div class="col-6">
				<h3>Seller</h3>
				<form>
				  <div class="form-row">
					<div class="form-group col-md-4">
						<label for="sellerWallet">Wallet</label>
						<input id="sellerWallet" type="text" class="form-control" placeholder="Wallet" value="0x3fC5Bd9ef78BC923D51448f5C957dd6B1BECabC8">
					</div>
					<div class="form-group col-md-4">
						<label for="sellerName">FullName</label>
						<input id="sellerName" type="text" class="form-control" placeholder="FullName" value="Captain Marvel">
					</div>
					<div class="form-group col-md-4">
						<label for="sellerTG">Telegram</label>
						<input id="sellerTG" type="text" class="form-control" placeholder="Telegram" value="@captainMarvel">
					</div>
				  </div>
				</form>	
			</div>
		</div>
		<hr />
		
		<div class="row">
			<div class="col-6">
				<h2>Mission</h2>
				<form>
				  <div class="form-row">
					<div class="form-group col-md-12">
						<label for="amount">BNB Amount</label>
						<input id="amount" type="text" class="form-control" placeholder="BNB Amount" value="0.1">
					</div>
					<div class="form-group col-md-12">
						<label for="description">Description</label>
						<textarea id="description" type="text" class="form-control" placeholder="Description">Can you save IronMan life ?</textarea>
					</div>
				  </div>
				</form>			
			</div>
		</div>
		<div class="row mt-2">
			<div class="col-6">
				<button type="button" id="createMission" class="btn btn-primary">
					<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
					Create Mission
				</button>
				<div id="successMsg" class="alert alert-success" role="alert">
				  
				</div>
				<div id="errorMsg" class="alert alert-danger" role="alert">
				 
				</div>
			</div>
		</div>
		

		
	</div>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
	<script src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js" type="application/javascript"></script>	
	
	<script type="text/javascript">
		const missionABI = [{"inputs":[{"internalType":"address","name":"buyerWallet","type":"address"},{"internalType":"string","name":"buyerName","type":"string"},{"internalType":"string","name":"buyerTG","type":"string"},{"internalType":"address","name":"sellerWallet","type":"address"},{"internalType":"string","name":"sellerName","type":"string"},{"internalType":"string","name":"sellerTG","type":"string"},{"internalType":"string","name":"missionDescription","type":"string"},{"internalType":"uint256","name":"missionAmount","type":"uint256"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[],"name":"MissionAccepted","type":"event"},{"anonymous":false,"inputs":[],"name":"MissionCanceled","type":"event"},{"anonymous":false,"inputs":[],"name":"MissionFunded","type":"event"},{"anonymous":false,"inputs":[],"name":"MissionGivenUp","type":"event"},{"anonymous":false,"inputs":[],"name":"MissionPaid","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"amountRefundedToBuyer","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amountRefundedToSeller","type":"uint256"}],"name":"ModeratorIntervention","type":"event"},{"inputs":[],"name":"Amount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"Buyer","outputs":[{"internalType":"address","name":"wallet","type":"address"},{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"tg","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"BuyerHasCanceledMission","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"BuyerHasFundedMission","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"BuyerHasPaidMission","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"CreationDate","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"Description","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"Moderator","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"Seller","outputs":[{"internalType":"address","name":"wallet","type":"address"},{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"tg","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"SellerHasAcceptedMission","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"feesAddress","outputs":[{"internalType":"address payable","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"stateMutability":"payable","type":"receive"},{"inputs":[],"name":"financeMission","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"payMission","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"cancelMission","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"acceptMission","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"giveUpMission","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"isFunded","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"percentageToBeRefundedToBuyer","type":"uint256"}],"name":"mediation","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"info","outputs":[{"internalType":"string","name":"","type":"string"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"bool","name":"","type":"bool"},{"internalType":"bool","name":"","type":"bool"},{"internalType":"bool","name":"","type":"bool"},{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"}];
		const missionbyteCode = "0x60806040527334a1a24bb6c8a692e6f5f7650c89bd88cb51a28d600960046101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555073627306090abab3a6e1400e9345bc60c78a8bef57600a60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550601e600b556005600c55348015620000c557600080fd5b5060405162002594380380620025948339818101604052610100811015620000ec57600080fd5b8101908080519060200190929190805160405193929190846401000000008211156200011757600080fd5b838201915060208201858111156200012e57600080fd5b82518660018202830111640100000000821117156200014c57600080fd5b8083526020830192505050908051906020019080838360005b838110156200018257808201518184015260208101905062000165565b50505050905090810190601f168015620001b05780820380516001836020036101000a031916815260200191505b5060405260200180516040519392919084640100000000821115620001d457600080fd5b83820191506020820185811115620001eb57600080fd5b82518660018202830111640100000000821117156200020957600080fd5b8083526020830192505050908051906020019080838360005b838110156200023f57808201518184015260208101905062000222565b50505050905090810190601f1680156200026d5780820380516001836020036101000a031916815260200191505b5060405260200180519060200190929190805160405193929190846401000000008211156200029b57600080fd5b83820191506020820185811115620002b257600080fd5b8251866001820283011164010000000082111715620002d057600080fd5b8083526020830192505050908051906020019080838360005b8381101562000306578082015181840152602081019050620002e9565b50505050905090810190601f168015620003345780820380516001836020036101000a031916815260200191505b50604052602001805160405193929190846401000000008211156200035857600080fd5b838201915060208201858111156200036f57600080fd5b82518660018202830111640100000000821117156200038d57600080fd5b8083526020830192505050908051906020019080838360005b83811015620003c3578082015181840152602081019050620003a6565b50505050905090810190601f168015620003f15780820380516001836020036101000a031916815260200191505b50604052602001805160405193929190846401000000008211156200041557600080fd5b838201915060208201858111156200042c57600080fd5b82518660018202830111640100000000821117156200044a57600080fd5b8083526020830192505050908051906020019080838360005b838110156200048057808201518184015260208101905062000463565b50505050905090810190601f168015620004ae5780820380516001836020036101000a031916815260200191505b50604052602001805190602001909291905050508473ffffffffffffffffffffffffffffffffffffffff168873ffffffffffffffffffffffffffffffffffffffff16141562000565576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601f8152602001807f427579657220616e642053656c6c65722063616e277420626520657175616c0081525060200191505060405180910390fd5b60405180606001604052808973ffffffffffffffffffffffffffffffffffffffff168152602001888152602001878152506000808201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506020820151816001019080519060200190620005fc9291906200070f565b5060408201518160020190805190602001906200061b9291906200070f565b5090505060405180606001604052808673ffffffffffffffffffffffffffffffffffffffff16815260200185815260200184815250600360008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506020820151816001019080519060200190620006b79291906200070f565b506040820151816002019080519060200190620006d69291906200070f565b509050508160069080519060200190620006f29291906200070f565b5080600881905550426007819055505050505050505050620007b5565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106200075257805160ff191683800117855562000783565b8280016001018555821562000783579182015b828111156200078257825182559160200191906001019062000765565b5b50905062000792919062000796565b5090565b5b80821115620007b157600081600090555060010162000797565b5090565b611dcf80620007c56000396000f3fe6080604052600436106101185760003560e01c80638191745f116100a0578063ab5cab8111610064578063ab5cab8114610639578063b24c7c9f14610666578063b7de6f8714610693578063ef7fe39c146106be578063fd2a98ab146106eb5761011f565b80638191745f1461040b57806391dd75e71461049b578063a182eb83146104dc578063a1c12e6b14610509578063a909525a146106225761011f565b80635a66bc6a116100e75780635a66bc6a14610320578063644fab0d1461034b5780636bf8a5f6146103865780636ffbb0d7146103c75780637c654303146103de5761011f565b806307fd3687146101245780632bee0b041461023d578063370158ea14610247578063586e4272146103095761011f565b3661011f57005b600080fd5b34801561013057600080fd5b50610139610702565b604051808473ffffffffffffffffffffffffffffffffffffffff1681526020018060200180602001838103835285818151815260200191508051906020019080838360005b8381101561019957808201518184015260208101905061017e565b50505050905090810190601f1680156101c65780820380516001836020036101000a031916815260200191505b50838103825284818151815260200191508051906020019080838360005b838110156101ff5780820151818401526020810190506101e4565b50505050905090810190601f16801561022c5780820380516001836020036101000a031916815260200191505b509550505050505060405180910390f35b61024561086a565b005b34801561025357600080fd5b5061025c610af8565b60405180806020018881526020018781526020018615158152602001851515815260200184151581526020018315158152602001828103825289818151815260200191508051906020019080838360005b838110156102c85780820151818401526020810190506102ad565b50505050905090810190601f1680156102f55780820380516001836020036101000a031916815260200191505b509850505050505050505060405180910390f35b34801561031557600080fd5b5061031e610bfe565b005b34801561032c57600080fd5b50610335610df5565b6040518082815260200191505060405180910390f35b34801561035757600080fd5b506103846004803603602081101561036e57600080fd5b8101908080359060200190929190505050610dfb565b005b34801561039257600080fd5b5061039b6110e6565b604051808273ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b3480156103d357600080fd5b506103dc61110c565b005b3480156103ea57600080fd5b506103f3611303565b60405180821515815260200191505060405180910390f35b34801561041757600080fd5b50610420611310565b6040518080602001828103825283818151815260200191508051906020019080838360005b83811015610460578082015181840152602081019050610445565b50505050905090810190601f16801561048d5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b3480156104a757600080fd5b506104b06113ae565b604051808273ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b3480156104e857600080fd5b506104f16113d4565b60405180821515815260200191505060405180910390f35b34801561051557600080fd5b5061051e6113e7565b604051808473ffffffffffffffffffffffffffffffffffffffff1681526020018060200180602001838103835285818151815260200191508051906020019080838360005b8381101561057e578082015181840152602081019050610563565b50505050905090810190601f1680156105ab5780820380516001836020036101000a031916815260200191505b50838103825284818151815260200191508051906020019080838360005b838110156105e45780820151818401526020810190506105c9565b50505050905090810190601f1680156106115780820380516001836020036101000a031916815260200191505b509550505050505060405180910390f35b34801561062e57600080fd5b5061063761154f565b005b34801561064557600080fd5b5061064e611873565b60405180821515815260200191505060405180910390f35b34801561067257600080fd5b5061067b611886565b60405180821515815260200191505060405180910390f35b34801561069f57600080fd5b506106a8611899565b6040518082815260200191505060405180910390f35b3480156106ca57600080fd5b506106d361189f565b60405180821515815260200191505060405180910390f35b3480156106f757600080fd5b506107006118b2565b005b60038060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690806001018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156107c25780601f10610797576101008083540402835291602001916107c2565b820191906000526020600020905b8154815290600101906020018083116107a557829003601f168201915b505050505090806002018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156108605780601f1061083557610100808354040283529160200191610860565b820191906000526020600020905b81548152906001019060200180831161084357829003601f168201915b5050505050905083565b3373ffffffffffffffffffffffffffffffffffffffff166000800160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161461092f576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260178152602001807f43616c6c6572206973206e6f742074686520627579657200000000000000000081525060200191505060405180910390fd5b600960019054906101000a900460ff16156109b2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260118152602001807f4d697373696f6e2069732066756e64656400000000000000000000000000000081525060200191505060405180910390fd5b600960009054906101000a900460ff1615610a35576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260138152602001807f4d697373696f6e2069732063616e63656c65640000000000000000000000000081525060200191505060405180910390fd5b610a3d611303565b610aaf576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260188152602001807f4e6f7420656e6f75676820424e422070726f76696465642e000000000000000081525060200191505060405180910390fd5b6001600960016101000a81548160ff0219169083151502179055507fd165f9d8128fa24343c185f17d3f2d430ee426c74f658245710f643637e08c9460405160405180910390a1565b60606000806000806000806006600854600754600960009054906101000a900460ff16600960019054906101000a900460ff16600960029054906101000a900460ff16600960039054906101000a900460ff16868054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610be05780601f10610bb557610100808354040283529160200191610be0565b820191906000526020600020905b815481529060010190602001808311610bc357829003601f168201915b50505050509650965096509650965096509650965090919293949596565b3373ffffffffffffffffffffffffffffffffffffffff16600360000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614610cc4576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260188152602001807f43616c6c6572206973206e6f74207468652073656c6c6572000000000000000081525060200191505060405180910390fd5b600960029054906101000a900460ff1615610d47576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260178152602001807f4d697373696f6e20697320616c7265616479207061696400000000000000000081525060200191505060405180910390fd5b600960039054906101000a900460ff16610dac576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526025815260200180611d546025913960400191505060405180910390fd5b6000600960036101000a81548160ff0219169083151502179055507f13d5f9edf1c4869722e0644fa1254d3db7bbb8b157ce0b3732ba61ca3886cfb760405160405180910390a1565b60085481565b3373ffffffffffffffffffffffffffffffffffffffff16600a60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614610ebe576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601b8152602001807f43616c6c6572206973206e6f7420746865204d6f64657261746f72000000000081525060200191505060405180910390fd5b6000610eeb6103e8610edd600b54600854611b5e90919063ffffffff16565b611be490919063ffffffff16565b905060008114610f5f57600960049054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc829081150290604051600060405180830381858888f19350505050158015610f5d573d6000803e3d6000fd5b505b60004790506000610f8c6064610f7e8685611b5e90919063ffffffff16565b611be490919063ffffffff16565b9050600081146110085760008060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690508073ffffffffffffffffffffffffffffffffffffffff166108fc839081150290604051600060405180830381858888f19350505050158015611005573d6000803e3d6000fd5b50505b47915060008214611086576000600360000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690508073ffffffffffffffffffffffffffffffffffffffff166108fc849081150290604051600060405180830381858888f19350505050158015611083573d6000803e3d6000fd5b50505b6001600960026101000a81548160ff0219169083151502179055507f2df677bede8c65babf6a60de66b0bf57f0b953d83d474943419478f32852129f8183604051808381526020018281526020019250505060405180910390a150505050565b600a60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b3373ffffffffffffffffffffffffffffffffffffffff16600360000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16146111d2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260188152602001807f43616c6c6572206973206e6f74207468652073656c6c6572000000000000000081525060200191505060405180910390fd5b600960039054906101000a900460ff1615611238576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526027815260200180611cf56027913960400191505060405180910390fd5b600960019054906101000a900460ff166112ba576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260158152602001807f4d697373696f6e206973206e6f742066756e646564000000000000000000000081525060200191505060405180910390fd5b6001600960036101000a81548160ff0219169083151502179055507ff64fdb2f48e24e9a8874c2926b707fbce2fc9521c33b90cc05376f9990860d9e60405160405180910390a1565b6000476008541115905090565b60068054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156113a65780601f1061137b576101008083540402835291602001916113a6565b820191906000526020600020905b81548152906001019060200180831161138957829003601f168201915b505050505081565b600960049054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600960019054906101000a900460ff1681565b60008060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690806001018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156114a75780601f1061147c576101008083540402835291602001916114a7565b820191906000526020600020905b81548152906001019060200180831161148a57829003601f168201915b505050505090806002018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156115455780601f1061151a57610100808354040283529160200191611545565b820191906000526020600020905b81548152906001019060200180831161152857829003601f168201915b5050505050905083565b3373ffffffffffffffffffffffffffffffffffffffff166000800160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614611614576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260178152602001807f43616c6c6572206973206e6f742074686520627579657200000000000000000081525060200191505060405180910390fd5b600960019054906101000a900460ff16611696576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260158152602001807f4d697373696f6e206973206e6f742066756e646564000000000000000000000081525060200191505060405180910390fd5b600960009054906101000a900460ff1615611719576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260138152602001807f4d697373696f6e2069732063616e63656c65640000000000000000000000000081525060200191505060405180910390fd5b60006117466103e8611738600b54600854611b5e90919063ffffffff16565b611be490919063ffffffff16565b9050600960049054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc829081150290604051600060405180830381858888f193505050501580156117b0573d6000803e3d6000fd5b5060004790506000600360000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690508073ffffffffffffffffffffffffffffffffffffffff166108fc839081150290604051600060405180830381858888f19350505050158015611826573d6000803e3d6000fd5b506001600960026101000a81548160ff0219169083151502179055507fd165f9d8128fa24343c185f17d3f2d430ee426c74f658245710f643637e08c9460405160405180910390a1505050565b600960029054906101000a900460ff1681565b600960009054906101000a900460ff1681565b60075481565b600960039054906101000a900460ff1681565b3373ffffffffffffffffffffffffffffffffffffffff166000800160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614611977576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260178152602001807f43616c6c6572206973206e6f742074686520627579657200000000000000000081525060200191505060405180910390fd5b600960039054906101000a900460ff16156119dd576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526038815260200180611d1c6038913960400191505060405180910390fd5b6119e5611303565b15611afb576000611a176103e8611a09600c54600854611b5e90919063ffffffff16565b611be490919063ffffffff16565b9050600960049054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc829081150290604051600060405180830381858888f19350505050158015611a81573d6000803e3d6000fd5b50600047905060008060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690508073ffffffffffffffffffffffffffffffffffffffff166108fc839081150290604051600060405180830381858888f19350505050158015611af6573d6000803e3d6000fd5b505050505b6001600960006101000a81548160ff0219169083151502179055506000600960016101000a81548160ff0219169083151502179055507e416334e9672164fec63bf0118588d3a00ba3a8a9fb757c76a884a05ed990ca60405160405180910390a1565b600080831415611b715760009050611bde565b6000828402905082848281611b8257fe5b0414611bd9576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526021815260200180611d796021913960400191505060405180910390fd5b809150505b92915050565b6000611c2683836040518060400160405280601a81526020017f536166654d6174683a206469766973696f6e206279207a65726f000000000000815250611c2e565b905092915050565b60008083118290611cda576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825283818151815260200191508051906020019080838360005b83811015611c9f578082015181840152602081019050611c84565b50505050905090810190601f168015611ccc5780820380516001836020036101000a031916815260200191505b509250505060405180910390fd5b506000838581611ce657fe5b04905080915050939250505056fe5468652073656c6c657220616c726561647920616363657074656420746865206d697373696f6e5468652073656c6c65722068617320616363657074656420746865206d697373696f6e2c20796f752063616e27742063616e63656c2069745468652073656c6c657220616c72656164792067697665757020746865206d697373696f6e536166654d6174683a206d756c7469706c69636174696f6e206f766572666c6f77a26469706673582212201226a4f84be3daa265273bfdf562c25f1a8716cdd1620a6ccf336342002e865364736f6c634300060c0033";
		
		$(document).ready(function () {
			var walletInit = () => {
				if (typeof window.ethereum !== 'undefined') {
				  const wallets = ethereum.request({ method: 'eth_requestAccounts' });
				  wallets.then(function(wallet){
					wallet = wallet[0];
					$('#connectWallet').text(wallet);
				  });
				}
			};
			
			walletInit();
			
			$('#createMission .spinner-border').hide();
			$('#financeMission .spinner-border').hide();
			$('#successMsg').hide();
			$('#errorMsg').hide();
			 
			var ethersProvider;
			var missionFactory;
			var contractMission;
			var wallet;
			
			$('#connectWallet').click(function(){
				if (typeof window.ethereum !== 'undefined') {
				  const wallets = ethereum.request({ method: 'eth_requestAccounts' });
				  wallets.then(function(wallet){
					$('#connectWallet').text(wallet[0]);
					wallet = wallet[0];
				  });
				}
			});
			
			if (typeof window.ethereum !== 'undefined') {
				ethereum.on('accountsChanged', (wallet) => {
					$('#connectWallet').text(wallet[0]);
					wallet = wallet[0];
				});
			}
			
			$('#createMission').click(async () => {		
				$('#createMission .spinner-border').show();

				$('#errorMsg').hide();
				$('#successMsg').hide();
				
				try {
					var contract = await missionFactory.deploy(
									  $('#buyerWallet').val() , $('#buyerName').val() , $('#buyerTG').val()
									, $('#sellerWallet').val(), $('#sellerName').val(), $('#sellerTG').val()
									, $('#description').val()
									, ethers.utils.parseEther($('#amount').val(), "ether").toString()
								);
								
					await contract.deployTransaction.wait();
					contractMission = contract;
					console.log(contractMission);
					
					$('#successMsg').show();
					$('#successMsg').html("<a href='/mission?addr=" + contractMission.address + "'>Go to mission</a>");
					window.location.href = "mission?addr=" + contractMission.address;
				}
				catch(err) {
					console.log(err);
					
					$('#errorMsg').show();
					$('#errorMsg').html(err);
				}
				
				$('#createMission .spinner-border').hide();
			});
						
			(async function() {
				ethersProvider = new ethers.providers.Web3Provider(window.ethereum, 'any');
				missionFactory = new ethers.ContractFactory(
				  missionABI,
				  missionbyteCode,
				  ethersProvider.getSigner(),
				);
			
			})();
			
		});
	</script>
  </body>
</html>

